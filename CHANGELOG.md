## 1.27.3（2025-3-24）
1. AB 插件新增支持属性筛选

## 1.27.2（2025-1-14）
1. 新增配置 properties_priority: 3 使得 register 的属性优先级大于 registerPage

## 1.27.1（2024-11-8）
1. 新打包 v2 版本，该版本删除了部分自动内置的插件，去除了部分过期 API，可以降低约 1/4 的代码。后期还会开发 v3，v4来尽可能的去除不需要的功能。
2. 去除了 mtp，sat，版本。

## 1.26.19（2024-11-5）
1. 新增弹窗时间下发。

## 1.26.18（2024-10-11）
1. 新增
 - 点击图支持英文版。
 - 点击图支持配置请求超时时间。

## 1.26.17（2024-9-11）
1. 修复
  - 升级到 v1.26.15 和 v1.26.16 后会导致曝光插件无法触发。

## 1.26.16（2024-8-26）
1. 优化
  - GA4 转神策插件，功能优化。

## 1.26.15（2024-8-14）
1. 修复
  - 解决当前 checkmarx 扫描出来的安全问题，包含 prototype pollution 等异常。
2. 新增
 - GA4 转换成神策数据的插件。
3. 优化
 - 点击图里的模式改成了渲染模式。
 - 去除了 readme 中图片不能显示。

## 1.26.14（2024-7-4）
1. 修复
   - 兼容 Deeplink 官方文档上新的和老的两种写法（目前文档都是改成新的标准插件写法了）。

## 1.26.13（2024-6-28）
1. 修复
   - customEventsSender 插件在图片发送且有多条数据的情况下报错。

## 1.26.12（2024-4-28）
1. 优化
   - cookie 时长从 730 天修改为 360 天。
   - 优化可视化 iframe 传过来的数据只能是 http 开头的，
   - 优化 prototype pollution 的安全问题。

## 1.26.11（2024-4-7）
1. 修复
   - 可视化 iframe 存在的 javascript: 导致的 xss 问题。
   - 点击图 xss 问题。
   - chrome 浏览器提示 unload API 过期。 

## 1.26.10（2024-3-29）
1. 优化   
   - A/B 可视化SDK 支持图片类型元素修改 srcset 属性。

## 1.26.9（2024-3-29）
1. 优化   
   - 给测试 cookie 加上了可用 secure 的标记。
   - 去除可视化属性功能中用到的提示，包括带有 sensorsdata.cn 的帮助文档链接。
   - 去除了 cookie 中的 device_id ，减少了 cookie 的大小。
   - 去除了发布的源码文件

## 1.26.8（2024-3-25）
1. 修复
   - 可视化 iframe 存在的 javascript: 导致的 xss 问题。
2. 优化   
   - ID3 废弃 loginWithKey，内外层匿名 ID 保持一致，identify 默认是加 true 的效果。

## 1.26.7（2024-3-8）
1. 修复
   - 可视化 iframe 存在的 javascript: 导致的 xss 问题。
   - 域名没有 www 时候，最近一次的数据异常。
2. 优化   
   - 表单内 input 的 name 是 tagName 关键字时候导致的代码异常。
   - Android 打通新增了一些调试日志。

## 1.26.6（2024-2-23 已废弃）
1. 修复
   - 域名没有 www 时候，最近一次的数据异常。
2. 优化   
   - Android 打通新增了一些调试日志。

## 1.26.5（2023-12-29）
1. 新增
   - ABTesting SDK 可视化 2 期迭代。添加 HTML&元素路径搜索。

## 1.26.4（2023-12-26）
1. 修复
   - checkmarx 对 heatmap.js 扫描出的 jquery 等安全问题进行优化，并修复新的 dom xss 问题。 

## 1.26.3 (2023-12-14)
1. 修复
   - 插件 ABTesting 的异常报错， stop 不存在。

## 1.26.2 (2023-12-7)
1. 修复
   - 另一种点击图请求安全问题。

## 1.26.1 (2023-12-6)
1. 修复
   - 点击图请求安全问题。

## 1.25.24 (2023-11-21)
1. 优化
   - 对整合数据阶段的代码做了 debug，用来诊断环境有什么异常导致的 distinct_id 等异常。

## 1.25.23 (2023-11-10)
1. 修复
   - WebPageLeave 插件在打通情况下变更打通状态导致偶现的 $time 无法入库，需要同时更新Android、iOS SDK。 

## 1.25.22 (2023-10-26)
1. 修复
   - 点击图复选框展示的数据较长时候展示不全的问题
   新增
   - resetAnonymousIdentity 重置 IDM3 匿名 ID

## 1.25.21 (2023-10-9)
1. 修复
   - 修复国密数据后端解密兼容问题

## 1.25.20 (2023-9-25)
1. 新增
   - 新增国密数据发送加密插件

## 1.25.19 (2023-9-19)
1. 新增
   - ajax 发送成功和失败的回调
2. 优化
   - cookie 的最大时长

## 1.25.16 (2023-9-7)
1. 修复
   - 修复批量发送设置 send_interval 无效的问题
   - 修复集成曝光插件，可视化埋点模式报错

## 1.25.15 (2023-8-29)
1. 修复
   - 修复 `A/B Testing` 多链接实验控制组页面跳出率低问题

## 1.25.14 (2023-8-24)
1. 新增
    - `A/B Testing` 可视化实验新增支持全局脚本及样式，优化样式修改范围
2. 修复
    - 优化 `A/B Testing` 正则匹配规则
    - 优化多链试验命中试验跳转

## 1.25.13 (2023-8-8)
1. 新增
    - 弹窗支持复杂数据权限
2. 修复
    - 修复安全扫描相关问题

## 1.25.12 (2023-8-3)
1. 修复
    - 修复安全扫描相关问题
    - 修复热力图控制台报错的问题

## 1.25.11 (2023-7-28)
1. 新增
    - `A/B Testing` 插件多链接试验新增事件不采集配置

## 1.25.10 (2023-7-12)
1. 修复
    - 修复自定义埋点 `track` 方法参数 `option` 失效的问题

## 1.25.9 (2023-6-27)
1. 修复
    - 修复数据接收地址配置成数组且发送方式为 `img` 时数据发送异常的问题
    - 修复批量发送空数组时会出现 `data_list` 值为 `W10` 的问题 

## 1.25.8 (2023-6-16)
1. 修复
    - 修复 `IE8` 下页面离开事件存在的兼容问题
    - 修复 `rect.width` 在客户环境偶现空引用问题 

## 1.25.7 (2023-6-14)
1. 修复
    - 修复批量发送可能存储值为 `null` 的问题
    - 修复批量发送 `_flush_time` 不准确的问题
    - 修复补发的页面离开事件 `_flush_time` 不准确的问题
    - 修复延迟设置曝光名导致的曝光配置不生效的问题

## 1.25.6 (2023-6-2)
1. 新增
    - 曝光插件支持过程回调

## 1.25.5 (2023-5-26)
1. 新增
    - 新增 `registerPropertyPlugin` 接口，支持属性的删除和修改

## 1.25.4 (2023-5-9)
1. 新增
    - 日志分级优化

## 1.25.3 (2023-5-4)
1. 新增
    - 弹窗蒙层点击优化
    - 新增弹窗点击回调

## 1.25.2 (2023-4-19)
1. 修复
    - 修复禁用 `localstorage` 导致的控制台报错问题
    - 修复 `track` 回调传值为非 `function` 类型执行报错的问题
    - 修复 `shadowdom` 中全埋点元素报错问题

## 1.25.1 (2023-4-10)
1. 新增
    - `A/B Testing` 插件埋点逻辑配置化

## 1.24.15 (2023-3-22)
1. 修复
    - 修复曝光采集插件重复曝光配置不生效的问题
    - 修复单页面跳转后，`$WebPageLeave` 事件属性 `$title` 取值不准确的问题
    - 修复热力图样式冲突导致的字体不显示的问题

## 1.24.14 (2023-3-3)
1. 修复
    - `PageLoad` 插件优化

## 1.24.13 (2023-2-17)
1. 修复
    - 优化 `cookie` 加密逻辑
    - 修复 `A/B` 可视化试验，单页面跳转时导致的动态图片加载出错的问题

## 1.24.12 (2023-2-9)
1. 修复
    - 修复全埋点点击事件配置 `collect_element` 不生效的问题

## 1.24.10 (2023-1-17)
1. 修复
    - `ID-Mapping 3.0` 优化，删除 `$identity_anonymous_id` 
    - 修复异常情况下批量发送存储数据 `key` 重复导致的数据发送失败问题

## 1.24.9 (2023-1-9)
1. 修复
    - 修复 `AES` 插件加密失效的问题
    - 修复插件版本号不一致的问题

## 1.24.8 (2022-12-30)
1. 新增
    - 新增支持实时上报数据插件
    - 新增自定义数据接收端插件
2. 修复
    - 插件化重构二期

## 1.24.7 (2022-12-15)
1. 修复
    - 修复部分场景下属性 `$first_referrer_host` 采集有值但是 `$first_referrer` 为空的问题
    - 修复 `url` 链接中有中文导致热力图无法显示数据的问题
    - 修复特殊场景下 `$pageview` 采集到了 `utm` 参数，但是流量来源类型是直接流量的问题

## 1.24.6 (2022-12-7)
1. 新增
    - 支持 `List` 列表元素非字符串类型
2. 修复
    - 修复 `isURLAPIWorking` 引起的黑链问题

## 1.24.5 (2022-11-22)
1. 新增
    - 支持关闭数据采集
2. 修复
    - 修复异步初始化 `SDK` 页面浏览事件无法打通的问题

## 1.24.4 (2022-11-17)
1. 新增
    - 新增 `SAT` 预置属性替换插件

## 1.24.3 (2022-11-11)
1. 新增
    - 新增支持非对称加密框架插件
    - `site_linker` 插件支持 `re_login` 配置
2. 修复
    - 页面浏览时长增加异常最大值限制

## 1.24.2 (2022-10-27)
1. 修复
    - 修复 `npm` 依赖报错的问题

## 1.24.1 (2022-10-26)
1. 新增
    - 插件化重构
    - 新增支持微信小程序 `webview` 回传插件

## 1.23.5 (2022-09-23)
1. 新增
    - 支持曝光事件采集
2. 修复
    - 修复特殊场景下 `iOS` 打通报错的问题

## 1.23.4 (2022-09-09)
1. 修复
   - 修复在较低版本的 `chrome` 及 `ie` 会报错，影响页面渲染无法正常显示的问题
   - 修复特殊场景下热力图打开报错的问题
   - 修复单页面场景下 `$WebPageLeave` 事件的 `$url_path` 和 `$url` 不一致的问题
   - 多域名打通 `_sasdk` 参数逻辑优化

## 1.23.3 (2022-07-01)
1. 修复
   - 在 `init` 之后初始化渠道插件，渠道插件功能不生效的问题

## 1.23.2 (2022-06-20)
1.  优化
    - 安全扫描优化
2. 修复
   - 低版本 webview 中 `postMessage` 不兼容的问题

## 1.23.1 (2022-06-10)
1.  新增
    - `Web JS SDK` 重构四期，`App` 内嵌 `H5` 打通代码重构
2.  修复
    - 修复网页热力图详情查看用户列表没有数据的问题
    - 修复网页热力图显示内容为页面分组时没有点击数据的问题
    - 修复 `login` 接口回调两次的问题
    - 修复 `demo` 中存在 `jsdelivr cdn` 地址无法访问的问题

## 1.22.9 (2022-06-07)
1.  新增
    - 新增 `Web JS 广告 SDK` 支持广告相关业务

## 1.22.8 (2022-05-31)
1.  新增
    - 新增 `SessionEvent` 插件

## 1.22.7 (2022-05-20)
1.  修复
    - 修复 `iOS` 内嵌 `H5` 打通情况下补发 `$WebPageLeave` 时间不准确的问题
    - 修复 `H5` 在特定机型的 `qq` 浏览器或者 `qq` 上使用 `beacon` 发送数据异常的问题 

## 1.22.6 (2022-05-07)
1.  修复
    - 修复特殊情况下热力图点击详情信息显示不全的问题
    - 修复热力图无法查看嵌套点击元素详情信息的问题

## 1.22.5 (2022-04-28)
1.  修复
    - 修复不支持 `localstorage`  的情况下初始化失败的问题

## 1.22.4 (2022-04-24)
1.  修复
    - 修复 `Deeplink` 匹配不到参数的问题
    - 修复当 `localstorage` 被打满时报错的问题
    - 批量发送优化

## 1.22.3 (2022-04-15)
1.  新增
    - `ID-Mapping 3.0` 新增 `loginwithkey` 接口，删除 `loginIDKey` 配置
    - `$WebPageLoad` 新增 `$url`、`$title` 属性 
2.  修复
    - `$first_browser_language` 属性值统一使用小写
    - 修复 `$url_path` 中文部分编码未解码的问题

## 1.22.2 (2022-04-2)
1.  新增
    - 新增支持自定义属性插件
    - 新增 `button`,`label`,`li` 点击事件支持无限层级
2.  修复
    - 修复点击图方案二切换到方案一监听事件没移除的问题
    - 修复单页面下 `heatmap` 里的 `collect_url` 配置不生效的问题

## 1.22.1 (2022-03-29)
1.  新增
    - `Web JS SDK` 重构三期，通用工具方法库 `wrench` 独立发布

## 1.21.13 (2022-03-25)
1.  修复
    - 修复热力图引起的 `xss` 问题
    - 修复热力图跳转后，跳转页面不进行热力图渲染的问题

## 1.21.12 (2022-03-18)
1.  修复
    - 修复 `localStorage` 心跳数据删除不成功导致 `$WebPageLeave` 频繁发送的问题
    - 修复网络环境是 `slow 3G` 的情况下会同时触发两个 `$WebPageLeave` 事件的问题
    - 修复一个用户只有 `$WebPageLeave` 事件没有 `$pageview` 事件
    - 修复单页面跳转 `url` 混乱的问题
    - 修复 `IE8` 使用 `img` 发送方式超时取消后会再次发送一个根域名请求的问题
## 1.21.11 (2022-03-11)
1.  新增
    - 多 `SDK` 支持 `A/B` 插件
## 1.21.10 (2022-03-4)
1.  新增
    - 新增 `SiteLinkerConcatUtm` 插件，支持跨域打通传递渠道数功能
    - 支持动态配置指定页面的 `$WebPageLeave` 采集
2.  修复
    - 修复 `IE 11` 浏览器下和 `Paypal` 插件不兼容的问题
    - 修复自定义埋点事件无法截断过长 `url` 的问题
    - 修复火狐浏览器出现 `cookie` 未设置 `secure` 属性警告的问题
    - `eventEmitter` 代码优化 

## 1.21.9 (2022-02-28)
1.  新增
    - 支持存储加密
2.  修复
    - 修复特殊场景下同一用户  $is_first_day = 0 但是 $is_first_time = 1 的问题

## 1.21.8 (2022-02-23)
1.  修复
    - 修复 `requireJS` 和 `sensorsdata.min.js` 的冲突问题

## 1.21.7 (2022-02-16)
1.  新增
    - `Web JS SDK` 重构二期，新增单元测试框架
    - 新增 `pageload` 插件获取页面资源大小
2.  修复
    - 修复前向域名显示为 `https` 的问题
    - 修复 `url` 路径中有 `#` 网页热力图无法加载的问题
    - 修复调用 `identify` 未设置 `$identity_anonymous_id` 的问题

## 1.21.6 (2022-01-27)
1.  修复
    - 修复调用 `trackAllHeatMap` 或 `trackHeatMap` 接口报错的问题

## 1.21.5 (2022-01-20)
1.  新增
    - 页面浏览时长支持单页面
    - 所有事件新增 `$viewport_width`  和 `$viewport_height` 属性
    - 点击事件新增 `$page_x` 和 `$page_y` 属性
    - 新增采集页面高度 `$page_height` 属性插件
    - `$WebPageLeave` 新增 `$viewport_position` 属性
2.  修复
    - 修复 `login` 回调执行两次的问题

## 1.21.4 (2022-01-14)
1.  修复
    - 修复百度关键词 `id` `Hash` 冲突问题
    - 修复数据接受地址配置成数组导致可视化埋点提示报错的问题

## 1.21.3 (2022-01-06)
1.  新增
    - 新增页面加载时长插件

## 1.21.2 (2021-12-31)
1.  新增
    - 可视化全埋点支持选择一个或多个元素
    - 获取预置属性接口增加 `$is_first_time` 属性获取

## 1.21.1 (2021-12-28)
1.  新增
    - Web SDK 支持合规要求，延迟初始化

## 1.20.3 (2021-12-22)
1.  新增
    - 埋点事件名、属性名、用户标识校验规则优化

## 1.20.2 (2021-12-17)
1.  新增
    - 支持 `ID-Mapping 3.0` 用户关联协议

## 1.19.14 (2021-12-13)
1.  修复
    - 修复 `decodeURIComponent` 解码失败的问题

## 1.19.13 (2021-12-11)
1.  新增
    - 百度关键词采集优化

## 1.19.11 (2021-11-22)
1.  修复
    - 修复网页热力图 `iframe` 高度太小的问题
    - 修复百度 `referrer` 截取的问题
## 1.19.10 (2021-11-12)
1.  修复
    - 修复 `Web` 可视化在错误的 `server_url` 下可以进行埋点的问题
## 1.19.9 (2021-11-9)
1.  新增
    - 支持数据加密传输
## 1.19.8 (2021-11-8)
1.  修复
    - 修复热力图展示详情与鼠标事件冲突的问题
## 1.19.7 (2021-11-5)
1.  修复
    - 修复网页热力图切换 `hash` 值丢失的问题
## 1.19.6 (2021-11-1)
1.  修复
    - 修复 `mtp SDK heatmap` 不配置默认开启全埋点的问题
## 1.19.5 (2021-10-22)
1.  新增
    - 支持同页面多个 `SDK` 隔离使用
## 1.19.4 (2021-10-19)
1.  修复
    - 修复 `postMessage` 传空值导致的异常问题
 ## 1.19.3 (2021-10-11)
1.  修复
    - 修复 `beacon` 数据发送模式在 `UIWebview` 控件中数据无法发送的问题
 
 ## 1.19.2 (2021-9-28)
1.  修复
    - 修复给 `window.tagName` 赋值页面报错的问题

## 1.19.1 (2021-9-26)
1. 新增
    - 主模块 `ES6` 改造

## 1.18.20 (2021-9-18)
1.  优化
    - 点击图请求超时优化

## 1.18.19 (2021-9-17)
1.  新增
    - 可视化全埋点 `App` 内嵌 `H5` 支持自定义属性
2. 修复
    - 修复 `iOS12` 下 `li` 元素不触发点击事件的问题

## 1.18.18 (2021-9-13)
1. 优化
    - 修改 `datasend_timeout` 为 `8` 秒，去除了队列发送，使用实时发送
    - 修改 `show_log` 默认值为 `false`	
    - 去除了 `use_client_time` 的配置，使用客户端时间发送数据
    - 去除了 `isDecodeURI` 配置，使用自动 URL 解码

## 1.18.17 (2021-9-7)
1. 修复
    - 修复全埋点关闭可视化全埋点元素依旧能圈选的问题
## 1.18.16 (2021-9-3)
1. 修复
    - 修复 `debug` 模式报错问题	

## 1.18.15 (2021-8-31)
1.  新增
    - 新增 `ESLint` 对代码语法做自动检查	
2. 修复
    - 修复不存在 `state.props` 对象初始化报错问题

## 1.18.14 (2021-8-23)
1.  新增
    - 支持采集页面浏览时长	
2. 修复
    - 修复 `$WebStay` 事件中 `event_duration` 可能为负值的问题

## 1.18.13 (2021-8-18)
1.  新增
    - 新增支持 `data-sensors-click` 无限层级

## 1.18.12 (2021-8-4)
1.  新增
    - 新增 `Item` 相关接口

## 1.18.11 (2021-7-31)
1.  修复
    - 修复 `IE10` 和 `IE11` 下 `hash` 实现的单页面路由不发送 `$pageview` 事件的问题

## 1.18.10 (2021-7-30)
1.  新增
    - 新增 `Cookie` 安全 `SameSite` 配置

## 1.18.9 (2021-7-27)
1.  优化
    - 优化 `profile_set_once` 的触发时机

## 1.18.8 (2021-7-23)
1. 新增
    - 新增百度搜索关键词采集功能

## 1.18.6 (2021-7-21)
1. 修复
    - 修复 `A/B Testing SDK` 和 `SF-Web-SDK` 同时使用，`$pageview` 事件监听异常问题

## 1.18.5 (2021-7-17) 
1. 修复
    - 修复第三方工具压缩源码导致初始化异常问题

## 1.18.4 (2021-7-14)
1. 修复
    - 自定义属性功能开关默认修改为关闭

## 1.18.3 (2021-7-9)
1. 优化
    - `isFunction` 方法支持异步函数
2. 修复
    - 修复 `isFunction` 方法不支持 ES6 语法问题 

## 1.18.2 (2021-6-26)
1. 新增
    - 可视化全埋点支持自定义属性
    - 可视化全埋点支持任意层级的 `div` 标签 	
2.  修复
    - 修复使用 `beacon` 发送方式在 `https` 域名下发送 `http` 请求报错的问题
## 1.17.2 (2021-5-31)
1. 修复
    - 修复触发弹窗时切换用户，弹窗事件 `distinct_id` 不正确问题

## 1.17.1 (2021-05-24)
1. 新增
    - 全埋点点击事件支持配置任意标签和可配置层级的 `div` 元素（最高三层）

## 1.16.16 (2021-05-20)
1. 修复
    - 修复 `App` 内嵌 `H5` 可视化 `H5` 元素无法被圈选问题
    - 修复不支持 `server_url` 配置成数组问题
    - 修复 `requirejs` 引入模块失败问题
    - 修复上报属性为空数组，属性会被删除问题

## 1.16.15 (2021-05-7)
1. 修复
    - 修复不采集 `$WebStay` 事件时，触达率图错误提示不准确问题
    - 修复 `XSS` 问题

## 1.16.14 (2021-04-30)
1. 新增
    - 新增参数配置 `is_secure_cookie`
2. 优化
    - 安全扫描优化
3. 修复
    - 修复用户 `ID` 变化后，弹窗和 `A/B Testing` 请求参数不准确的问题
## 1.16.12 (2021-04-22)
1.  优化
    - 安全扫描优化
## 1.16.10 (2021-04-17)
1.  新增
    - 新增 `cookie` 加密
## 1.16.9 (2021-04-10)
1.  修复
    - 修复可视化埋点 `XSS` 问题
## 1.16.8 (2021-04-07)
1. 新增
    - 支持渠道匹配和回传
## 1.16.7 (2021-03-19)
1. 新增
    - 新增 `url` 上中文解码功能
## 1.16.6 (2021-03-05)
1. 优化
    - `server_url` 自动补全协议
    - 微信广告渠道参数采集配置优化
    - 修改 `beacon` 逻辑，支持 `App` 内嵌 `H5` 和 微信中 `beacon` 发送			
    - 优化跨域打通功能避免 `SwiperJS` 轮播图链接打通失败
## 1.16.5 (2021-02-27)
1. 新增
    - 支持 `Google AMP` 框架数据采集	
    - 增加 `clearPageRegister API`，可以删除 `registerPage`  设置的公共属性
2. 优化
    - 将 `$title` 和 `$url` 设置为所有事件都有的属性
3. 修复
    - 修复 `XSS` 问题
## 1.16.4 (2021-02-20)
1. 新增
    - 新增 `ts` 声明文件
1. 优化
    - 热力图跨域问题优化

## 1.16.3 (2021-01-25)
1. 新增
    - `Web` 可视化全埋点支持同级元素合并

## 1.16.2 (2021-01-22)
1. 优化
    - 优化跨域打通标识存在特殊字符

## 1.16.1 (2021-01-13)
1. 优化
    - `data-sensors-click` 优化，父元素含有指定的自定义属性，则采集父元素的 `click` 事件
    -  `server_url` 为空添加提示
    -  优化跨域打通逻辑
    -  源码 `throw` 替换 `sd.log`
2. 修复
    - `Web` 热力图跳转新页面不渲染问题修复

## 1.15.27 (2020-12-21)
1. 优化
    - 调整可视化全埋点模式的判断机制
    - 页面地址和 `Ajax` 请求协议不同时，控制台提示

## 1.15.26 (2020-11-18)
1. 新增
    - 支持非队列实时发送数据

## 1.15.25 (2020-11-13)
1. 新增
    - 支持 `use` 方法引入插件
    - 支持可动态配置其他类型元素的自动采集 

## 1.15.24 (2020-10-30)
1. 新增
    - 支持 `A/B Testing` 功能

    

## 1.15.23 (2020-10-27)
1. 修复
    - 兼容 Deeplink 插件首字母大小写问题

## 1.15.22 (2020-10-26)
1. 优化
    - 跨域名打通使用URL安全base64加密功能
2. 修复
    - getAppStatus 函数返回为 undefined 问题

## 1.15.21 (2020-10-11)
1. 优化
    - 优化批量发送功能

## 1.15.20 (2020-9-17)
1. 优化
    - SDK 传入的属性检查
    - getPresetProperties 方法增加是否首日属性
    - $element_selector 截取长度优化

## 1.15.19 (2020-9-16)
1. 优化
    - SDK 传入的属性检查
    - getPresetProperties 方法增加是否首日属性
    - $element_selector 截取长度优化

## 1.15.18 (2020-9-08)
1. 新增
    - 微信广告渠道参数解析
    - 可视化全埋点文件 vtrack.min.js 可配置的获取地址

## 1.15.17 (2020-9-2)
1. 修复
    - getIOSVersion 方法报错
    

## 1.15.16 (2020-8-12)
1. 修复
    - iOS 浏览器在不配置 `heatmap` 时，初始化页面报错
    

## 1.15.15 (2020-8-07)
1. 新增
    - 全埋点支持 `div` 采集 
2. 修复
    - 网页热力图工具条不显示
    

## 1.15.14 (2020-8-03)
1. 新增
    - DeepLink 服务支持 

## 1.15.13 (2020-7-27)
1. 修复
    - 热力图黑框内 `table` 样式优化
    - `server_url` 为空不发数据
    - 将 `catch` 到的异常进行错误日志语义化

## 1.15.12 (2020-7-6)
1. 修复
    - 多域名打通 `distinct_id` 加密，不处理波浪线特殊符号
    - 多域名打通 `distinct_id` 加密，`IE` 浏览器兼容问题处理

## 1.15.11 (2020-7-1)
1. 优化
    - 多域名打通 distinct_id 加密
    - 热力图中的 jquery 导致控制台报错
2. 修复
    - 热力图页面有错误 id，会导致热力图无法渲染

## 1.15.10 (2020-6-27)
1. 修复
    - 1.15.8 引入的打开页面时候最近一次预置属性取值异常的 bug

## 1.15.9 (2020-6-15)
* 新增：$timezone_offset 预置属性

## 1.15.8 (2020-6-12)
* 修复：1.15.3 引入的在 iframe 里采集数据，第一秒内数据会丢失的 bug

## 1.15.6 (2020-6-5)
* 新增：Web 可视化 Chrome 插件截图功能
* 优化：App 内嵌 H5 时候，使用 file 协议加载 H5 时候导致的解析异常
* 优化：全埋点的点击采集从冒泡模式改为捕获模式
* 优化：增加点击图没有开启 pageview 时候的错误提示

## 1.15.5 (2020-5-22)
* 新增：App 内嵌 H5 的可视化方案
* 新增：第四版打通方案，解决苹果手机 iframe 打通问题
* 优化：Web 可视化中新增 a 链接是 javascript:; 的判断

## 1.15.4 (2020-5-7)

* 新增：Web 多域名打通

## 1.15.3 (2020-5-6)

* 新增：Web 可视化全埋点  

## 1.15.2 (2020-5-6)

* 优化：触达图实线的数据保留2位小数且取小 

## 1.15.1 (2020-4-12)

* 新增：由于弹框需要，新增监听事件发送和 ID 切换功能 
* 新增：为方便接入后续的弹框和可视化功能，新增了设置插件功能 

## 1.14.24 (2020-4-3)

* 新增：$SignUp 事件带上 $url 和 $title 预置属性
* 优化：源码安全性完善

## 1.14.23 (2020-3-9)

* 新增：自动采集含有特殊属性：data-sensors-click 的元素点击事件
* 修复：热力图高亮元素下为子元素增了 saContainer 样式导致样式错位
* 修复：iOS 操作系统 10.2 以下打通兼容问题

## 1.14.22 (2020-2-24)

* 优化：发送采集的数据时，会将与系统保留字段同名的属性过滤
* 修复：identify API 不传第二个参数，仍然会修改 storage 中的 distinct_id
* 优化：源码中移除了一点测试代码
* 新增：新增配置项设置 app 打通校验失败后，是否发送数据

## 1.14.21 (2020-2-10)

* 优化：热力图样式被全局样式干扰问题
* 新增：增加可配置的公共属性 $title
* 优化：热力图筛选功能报错

## 1.14.20 (2020-1-9)

* 优化：按照客户需求，优化触达图的监控逻辑。在单页面情况下，也能通过配置 scroll_map 的 collect_url 来筛选具体哪些页面开启。

## 1.14.18 (2019-12-24)

* 新增：点击图增加浮层用以筛选点击图展示的元素
* 新增：getPresetProperties() 可以获取 $latest_referrer_host 字段
* 修复：批量发送数据功能开启后，在断网/恢复后无法发送数据

## 1.14.17 (2019-12-16)

* 优化：没有调用 init 就执行 track 等相关方法，不报错

## 1.14.16 (2019-12-9)

* 修复：utm设置false时的取值异常问题

## 1.14.15 (2019-12-2)

* 优化：支持属性传入 function

## 1.14.14 (2019-11-25)

* 新增：增加sensorsdata.es6.min.js文件，适用于es6方式import文件

## 1.14.13 (2019-10-28)

* 优化：新版用户关联，每条数据中会有匿名id和真实id。
* 优化：如果单页面中设置了is_track_single_page:true，获取预置属性的接口getPresetProperties得到的$referrer会更新。

## 1.14.12 (2019-10-16)

* 优化：$WebStay 的停留时长，增加最大值的配置 scroll_event_duration，默认5小时。
* 修复：heatmap 配置中 element_selector 设置为 'not_use_id' 时候，$element_selector 取值错误。

## 1.14.11 (2019-10-09)

* 优化：$latest_referrer 为空时，$latest_referrer_host 也为空；只有在含有 $referrer 属性时才增加 $referrer_host 属性


## 1.14.10 (2019-10-08)

* 优化：$referrer 为空时 $referrer_host 也为空
* 新增：新增preset_properties，可以配置 url为true时， 所有事件都自动采集$url。默认是false
* 优化：合并preset_properties和is_track_latest，兼容is_track_latest，但是后续在preset_properties里配置的话，需要增加latest_前缀
* 优化：is_track_single_page:true 在 IE8 和 IE 9上会自动监听hashchange

## 1.14.9 (2019-09-17)

* 优化：解析URL参数值时,不自动替换加号为空格。修复utm里包含%2B时会被替换成空格的问题，不会自动解析表单值里的空格自动转换的+

## 1.14.8 (2019-08-30)
* 优化：sensors.login(id,callback) 增加 callback 功能
* 优化：referrer_host的取值是在发数据前通过referrer解析，不是在触发时候取值。配置项is_track_latest.referrer_host 默认值由 true 改为 false，默认不采集$latest_referrer_host最近一次前向地址


## 1.14.7 (2019-08-26)
* 新增：先存localStorage再发数据的功能，详细用法参考
1.可以解决本地网络如果暂时不好，发不出的话，可以先存储后发
2.可以解决关闭页面发数据丢失问题（通过先存本地，下次打开再发）
[详细文档](https://www.sensorsdata.cn/manual/js_sdk.html#81-batchsend)


## 1.14.6 (2019-08-15)

* 新增：enableLocalLog() 和 disableLocalLog() 方法开启和关闭控制台日志输出

## 1.14.5 (2019-08-06)

 * 修正了直接打开页面时，latest_相关属性显示为“取值异常”的问题
 * 修正了URL解析在部分浏览器上失败的问题

## 1.14.4 (2019-08-06)

 * 优化了解析URL的代码，减小了文件体积

## 1.14.3 (2019-07-30)

* 修复了不能获取搜索引擎关键词的问题

## 1.14.2 (2019-07-25)

* 修复，1.14.1中isReady不能保证sdk已经执行

## 1.14.1 (2019-07-19)

* 大幅优化代码结构。增加重复引入的判断，彻底解决各种异常重复引入问题
* is_track_single_page 参数增加支持 callback 类型
* 增加 img_use_crossorigin 配置项，如果设置为 true 以图片方式发送数据时请求不会附带 cookie，默认值为 false

## 1.13.14 (2019-07-03)

* 回退 1.13.11 增加的 corssOrigin，如果客户在 nginx 转发配置中，去掉了我们原有的 access-allow-origin 会导致请求失败

## 1.13.13 (2019-06-25)

* app和h5打通失败时，增加错误原因

## 1.13.12 (2019-06-21)

* 优化属性不规范的错误提示
* 优化非amd模式下js去掉支持require方式

## 1.13.11 (2019-06-14)

* 减小请求大小，以图片方式向神策后台发送数据时不带上 cookie

## 1.13.10 (2019-06-05)

* 解决了网页热力分析中点击图浮层样式被覆盖的问题
* 解决了设置 send_type: ajax 在 IE6 和 IE7 不工作的问题
* 修复了1.13.9引入的没有开启APP与H5打通时显示打通失败的问题

## 1.13.9 (2019-05-31)

* 增加了APP与H5打通时的日志信息

## 1.13.8 (2019-05-23)

* 修改了trackAllHeatMap必须设置heatmap属性否则会报错的BUG
* 去掉了callback 是对象类型时扩展 lib 属性的功能
* 增加了事件捕获模式支持
* 修复了$WebStay在关闭页面前没有发数据的bug

## 1.13.7 (2019-05-17)

* trackHeatMap 和 trackAllHeatMap 方法增加了自定义属性支持

## 1.13.6 (Unknown)

* 修改微信浏览器中获取不到document.documentElement.scrollTop而报错的异常
* 增加了浏览器发送数据不支持 beacon 时的适配，自动切换为 image 模式

## 1.13.5 (2019-05-13)

* 增加了简化版本的JSAPP功能，提供了存储和发送数据的接口，客户自己实现存储，来达到离线存储的目的，支持file协议

## 1.13.4 (2019-05-08)

* 增加了获取匿名ID的方法 sensors.quick('getAnonymousID') ,返回匿名 id
* 在存储 cookie 时会截取 register 的字符串 max_referrer_string_length 长度

## 1.13.3 (Unknown)

* 增加了新版的域名解析系统

## 1.13.2 (2019-04-10)

* 增加渠道类型中自定义付费广告的相关参数 souce_type.utm 配置
* 修改$latest_landing_page属性取值异常的情况
* 增加对.top的域名解析

## 1.13.1 (2019-04-04)

* 点击图的优化，增加https里发http请求的错误提示，增加heatmap_url没配置时候自动获取cdn，增加heatmap没配置时候无法查看点击图的错误提示

## 1.12.18 (2019-03-11)

* 增加is_track_single_page 自动采集url切换

## 1.12.17 (Unkown)

* 修复了获取搜索引擎关键字sogou和so产生的问题

## 1.12.16 (Unkown)

* 增加了is_track_latest配置属性，用于控制是否采集$latest相关属性，并且增加了$latest_landing_page用于表示最近一次落地页
* **增加了预置属性，可能需要小版本升级神策分析，改功能默认不开启**

## 1.12.15 (2019-03-01)

* referrer_domain参数修改，domain解析库增加ai后缀

## 1.12.14 (2019-02-20)

* trackHeatMap增加新方法trackAllHeatMap可以采集a，input，button标签

## 1.12.13 (Unknown)

* autoTrackSinglePage修改了当前referrer为url的问题

## 1.12.12 (Unknown)

* trackHeatMap方法增加callback属性
* 第一版点击图给点击元素的after和before伪元素增加了pointer-events:none属性

## 1.12.11 (Unknown)

* 增加clearAllRegister删除单个cookie的功能

## 1.12.10 (2019-01-25)

* $WebClick采集元素id的改进

## 1.12.9 (2019-01-22)

* 完善$WebStay对于横向滚动的判断

## 1.12.8 (2019-01-15)

* 增加了第二版点击图对于opacity=0的元素的判断

## 1.12.7 (2019-01-05)

* 增加判断heatmap.js和sensorsdata.js版本是否一致的判断，打印log

## 1.12.6 (2018-12-26)

* 去掉_nocache的防止静态缓存，默认增加_track_id的防止静态缓存，同时_track_id包含去重的功能，但是必须开启use_client_time。use_client_time如果使用客户端时间的话，会自动增加_flush_time来做客户端时间校准
* 完善ajax的timeout在ie6，7，8，9，10，11，edge下的各种异常处理
* 修复获取domain异常时候，设置cookie的domain再某些浏览器异常的问题

## 1.12.5 (2018-11-21)

* 优化关闭页面前，如果有多次发数据时候的性能，queue_timeout 设置成 0 的时候，不再使用setTimeout 0发送，改成直接发送。会脱离队列数据发送的流程，变为直接发送数据

## 1.12.3 (2018-11-14)

* 去除12.1增加的$WebStay的$viewport_left属性导致的埋点管理报错

## 1.12.2 (2018-11-10)

* 增加点击图采集数据时候，采集浏览器宽度
* 调整点击图开始渲染的时间为1秒间隔

## 1.12.1 (2018-11-09)

* 增加点击图第二版，按快捷键z和x，可切换点击图的渲染模式，用于解决某些点击图页面的样式冲突问题
* 增加配置heatmap:{element_selector:'not_use_id'} 不会使用id做为选择器，防止随机id导致的点击图不能使用
* 增加触达率图左右滚动的检查，禁止左右滚动触发scroll
* 增加scrollmap:{collect_url:false}{collect_url:function(){}}的配置。配置false的话，不采集$WebStay也就没有触达率图，配置function的话，会执行fucntion看返回值，返回真就采集，返回假不采集

## 1.11.10 (2018-10-22)

* 增加autoTrackSinglePage首次可以触发profile_set_once的功能

## 1.11.9 (2018-10-15)

* heatmap增加了setContent参数，setContent是一个函数，有一个element参数，用户可以对元素内容进行操作，然后返回想要显示的内容，返回的内容会在点击图中的"当前内容"中显示

## 1.11.8 (2018-09-29)

* 在10.1 - 1.11.7间的版本有这个问题，必须更新！部分浏览器，发送相同数据时，不会发送，导致丢失数据的问题！

## 1.11.7 (2018-09-20)

* 使用npm模块引入时候，多次init的判断

## 1.11.6 (2018-09-10)

* 优化超时机制，增加自定义域名
